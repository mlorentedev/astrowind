---
import IndexLayout from '../layouts/IndexLayout.astro';

const { lang } = Astro.props;

const title = 'Cancelar suscripción';
const subtitle = '';

const searchParams = Astro.url.searchParams;
const emailFromParam = searchParams.get('email') || '';
---

<IndexLayout title={title} description={subtitle} lang={lang}>
  <section class="max-w-md mx-auto p-8 bg-white rounded-lg shadow-md">
    <form 
      id="unsubscribe-form" 
      class="flex flex-col gap-4"
      hx-post="/api/unsubscribe"
      hx-target="#status-message"
      hx-swap="innerHTML">
      <div>
        <label for="email" class="block text-sm font-medium text-gray-700 mb-1">
          Correo electrónico
        </label>
        <input
          type="email"
          id="email"
          name="email"
          value={emailFromParam}
          placeholder="Tu email"
          required
          class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500"
        />
      </div>

      <button
        type="submit"
        class="w-full px-4 py-2 bg-cyan-700 text-white rounded-md hover:bg-cyan-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500 transition-colors"
      >
        Darme de baja
      </button>

      <p id="status-message" class="text-center text-sm mt-2"></p>
    </form>
  </section>
</IndexLayout>